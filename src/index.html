<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

  <title>Fez Comic - Ionic App</title>


  <base href="/" />

  <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="format-detection" content="telephone=no" />
  <meta name="msapplication-tap-highlight" content="no" />

  <link rel="icon" type="image/png" href="assets/icon/favicon.png" />
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  <meta name="google-signin-client_id" content="20997473920-opi6u7sbies9c4eket8tjr767l72j8q5.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js?onload=init" async defer></script>
  <script type="text/javascript">
    function onSignIn(googleUser) { 
      var id_token = googleUser.getAuthResponse().id_token;
      var xhr = new XMLHttpRequest();
      xhr.open('POST', 'http://fezcomic.jelastic.cloudhosted.es/B3servidorREST/webresources/auth/tokensignin');
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
      xhr.send('idtoken=' + id_token);
      if (typeof (Storage) !== "undefined") {
        sessionStorage.removeItem("token");
        sessionStorage.removeItem("nombre");
        sessionStorage.setItem("token", id_token);
        sessionStorage.setItem("nombre", "Bienvenido, " + googleUser.getBasicProfile().getName());
      }
      
    }
  </script>
  <script>
    function signOut() {
      var auth2 = gapi.auth2.getAuthInstance();
      auth2.signOut();
      auth2.disconnect();
      if (typeof (Storage) !== "undefined") {
        sessionStorage.removeItem("token");
        sessionStorage.removeItem("nombre");
      }
    }
  </script>
  <!-- add to homescreen for ios -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
</head>

<body>
  <app-root></app-root>
</body>

</html>